# Changelog

## 1.5.0

### 新增

- 新增 `lunabox://` 协议安装请求处理，并支持通过 IPC 客户端/服务端完成协议通信
- 新增 VNDB/Ymgal ID 格式校验，提升元数据来源输入准确性
- 新增 VNite 导入能力
- 新增分类 Emoji 支持与展示
- 新增多语言能力（i18n）与日语语言支持

### 优化

- 优化设置页布局结构，提升配置项组织与可读性
- 统一按钮组件为 BetterButton，提升界面一致性
- 优化游戏列表展示与筛选：支持按厂商搜索并高亮匹配结果

### 修复

- 修复游戏网格布局与空状态文案显示问题

## 1.4.0

### 新增

- 新增命令行工具 lunacli，支持通过 CLI 管理游戏（#38 ）
- 新增完整数据备份能力，并在设置中提供入口（#40 ）
- 分类功能增强：支持多选/批量加入分类（#39 ）
- 游戏启动追踪新增“自动识别进程”配置与 UI 开关
- CLI 命令参数新增 Locale Emulator 简写 flag
- 新增 LunaBox Code Agent开发规范文档

### 优化

- 增强 CLI 安装/可用性检测逻辑
- 进程检测/监控改为使用 Windows API（替代 tasklist），提升识别准确性

### 修复

- 修复退出/异常场景下未完成会话的清理逻辑，并改进关闭流程
- 修复部分图片可被拖拽导致的交互问题

## 1.3.4

### 新增

- 支持拖拽游戏文件夹/可执行文件到窗口快速导入（#25 ）
- 新增背景图片裁剪能力，选择后可裁剪所需区域并自动保存
- 新增时区配置与首次启动时区选择弹窗，用于正确显示与统计时间
- 游戏启动追踪支持手动选择实际运行进程，并可在游戏设置中预先填写进程名（#31 ）

### 优化

- 数据库时间字段迁移到 TIMESTAMPTZ，并按配置时区进行日期聚合，避免跨时区统计偏移
- 优化游戏详情页面展示样式（#30 ）
- 优化统计图表展示与交互，支持横向滚动（#22 ）

### 修复

- 修复部分时间字符串解析兼容性问题
- 修复进程选择取消/超时场景的会话清理，避免残留 pending 记录

## 1.3.2

### 新增

- 游戏设置/编辑面板新增 Locale Emulator 与 Magpie 相关配置与入口
- 引入 BetterSelect 下拉组件，并在多个设置面板中逐步替换原有下拉交互

### 优化

- 增强游戏库递归扫描能力并改进可执行文件识别逻辑（#15 ）
- 重构运行追踪/计时相关服务：引入 StartService 并整理 ActiveTimeTracker 相关模块
- 背景文件保存改为时间戳命名，并清理旧背景文件，避免堆积与覆盖
- 修复数据拉取过程中加载提示误显示的问题

## 1.3.0

### 新增

- 实现自动更新检查和用户通知系统，支持版本跳过，添加版本更新按钮和更新对话框
- 添加 TopBar 组件并实现无边框窗口支持
- 添加自定义背景图片设置功能，支持图片亮度检测，自定义背景下在多个组件上实现玻璃态（Glassmorphism）样式效果

### 优化

- 移除多个组件加载状态中的不必要 div，优化 DOM 结构
- 优化前端加载速度

## 1.2.0

### 新增

- 添加游戏分类管理功能，支持通过模态框管理游戏分类
- 实现游戏会话活跃时间监控，支持配置化追踪设置
- 实现单个游戏统计数据的多维度查询，支持时间维度选择器
- 记忆窗口大小，关闭时保存非最大化状态下的窗口尺寸

### 优化

- 修复 S3 云备份功能，修复了因ui问题导致的userid未生成
- 时间处理改为使用本地时间而非 UTC，避免一些情况下时间记录错位
- 备份服务重构为使用文件系统而非数据库存储游戏备份
- 更新 User-Agent 请求头，包含版本和来源信息
- 优化游戏tab切换加载，减少闪动
- 优化游戏统计数据加载，使用 useCallback 并移除骨架加载

## 1.1.3

### 新增

- 添加游戏远程信息更新功能，支持手动从远程源获取并更新游戏信息
- 支持手动添加游玩记录

### 优化

- [important]优化游戏执行时的资源加载，解决部分游戏无法正常启动的问题
- 实时保存窗口大小变化，使用事件 API 优化性能
- 优化系统托盘初始化同步机制
- 统一日期格式化显示，使用本地时间表示
- 改进游戏会话时长计算和格式显示

## 1.1.2

### 新增

- 添加手动添加游戏功能，支持自定义封面图片选择
- 增强游戏导入逻辑，添加路径检查和重复游戏处理

### 优化

- 防止侧边栏元素的拖拽，提升可用性
- FilterBar 组件排序持久化
- 优化卸载程序逻辑，改进更新处理流程
- 实现主题缓存和加载逻辑，优化主题切换体验
- 优化启动加载体验

## 1.1.0

### 新增

- 添加模板导出统计数据功能，新增部分内置模板
- 实现导入游戏后封面图片尝试异步下载，提升模板导出体验

### 优化

- 优化数据库备份和恢复功能
- 改进 NSIS 安装程序，支持无缝更新和用户数据保留选项
- 使用 html2canvas 替换 html-to-image，解决字体跨域问题
- 修复排行榜和游戏路径查询异常
- 清理未使用的模板函数，优化枚举类型组织

## 1.0.0

### 首次发布

- LunaBox 初始版本
